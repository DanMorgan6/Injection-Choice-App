<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Clinician Decision Support – Knee OA Injections</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <div class="topbar">
    <div class="brand">
      <img src="logo.png" class="brand-logo" alt="Logo"/>
      <div>
        <div class="brand-title">Clinician Decision Support – Knee OA Injections</div>
        <div class="brand-sub">Structured, evidence-informed support for injection choice discussions</div>
      </div>
    </div>
    <div style="display:flex; gap:10px; align-items:center;">
      <a class="btn btn-secondary" href="index.html">Home</a>
      <button class="btn btn-ghost" id="darkToggle">Dark mode</button>
    </div>
  </div>

  <div class="container">
    <div class="card">
      <div class="grid grid-3">
        <button class="btn btn-primary" id="startBtn">Start assessment</button>
        <button class="btn btn-primary" id="calcBtn">Finish &amp; view results</button>
        <button class="btn btn-secondary" id="printBtn">Print</button>
      </div>
      <div id="amberWarning" class="warning" style="display:none;"></div>
    </div>

    <div class="card hidden" id="formCard">
      <div class="stepper-header">
        <div class="stepper-title" id="stepTitle">Section</div>
        <div class="stepper-progress"><div class="stepper-bar" id="stepBar"></div></div>
        <div class="small" id="stepCounter"></div>
      </div>

      
<div class="step" data-title="Baseline">
  <h3>Baseline</h3>
  <div class="grid grid-2">
    <div><label for="age">Age (years)</label><input id="age" type="number" min="18" max="100"></div>
    <div><label for="vas">VAS pain (0–100)</label><input id="vas" type="number" min="0" max="100"></div>
    <div><label for="height">Height (cm)</label><input id="height" type="number" min="100" max="220"></div>
    <div><label for="weight">Weight (kg)</label><input id="weight" type="number" min="30" max="250"></div>
    <div><label for="bmi">BMI (auto)</label><input id="bmi" type="number" readonly></div>
    <div><label for="kl">KL grade (1–4)</label>
      <select id="kl"><option value="">--</option><option>1</option><option>2</option><option>3</option><option>4</option></select>
    </div>
  </div>
</div>

<div class="step" data-title="Inflammation">
  <h3>Inflammation</h3>
  <div class="grid grid-2">
    <div><label for="synovitis">Synovitis</label>
      <select id="synovitis"><option value="">--</option><option value="Y">Y</option><option value="N">N</option></select>
    </div>
    <div><label for="effusion">Effusion</label>
      <select id="effusion"><option value="">--</option><option value="Y">Y</option><option value="N">N</option></select>
      <p class="small">If effusion is present, aspiration can improve HA / hydrogel durability.</p>
    </div>
    <div id="aspiratedBlock" style="display:none;">
      <label for="aspirated">If effusion present: aspirated immediately prior?</label>
      <select id="aspirated"><option value="">--</option><option value="Y">Y</option><option value="N">N</option></select>
    </div>
  </div>
</div>

<div class="step" data-title="Structure & function">
  <h3>Structure &amp; function</h3>
  <div class="grid grid-2">
    <div><label for="malalign">Malalignment &gt;5°</label>
      <select id="malalign"><option value="">--</option><option value="Y">Y</option><option value="N">N</option></select>
    </div>
    <div><label for="quadweak">Quadriceps weakness</label>
      <select id="quadweak"><option value="">--</option><option value="Y">Y</option><option value="N">N</option></select>
    </div>
  </div>
</div>

<div class="step" data-title="Systemic factors">
  <h3>Systemic factors</h3>
  <div class="grid grid-2">
    <div><label for="metabolic">Systemic comorbidity (broad)</label>
      <select id="metabolic"><option value="">--</option><option value="Y">Y</option><option value="N">N</option></select>
    </div>
    <div><label for="nutr">Nutritional / metabolic risk</label>
      <select id="nutr"><option value="">--</option><option value="Y">Y</option><option value="N">N</option></select>
    </div>
    <div><label for="diabetes">Diabetes</label>
      <select id="diabetes"><option value="">--</option><option value="Y">Y</option><option value="N">N</option></select>
    </div>
    <div><label for="glaucoma">Glaucoma</label>
      <select id="glaucoma"><option value="">--</option><option value="Y">Y</option><option value="N">N</option></select>
    </div>
  </div>
</div>

<div class="step" data-title="Injection history & PCS-6">
  <h3>Injection history</h3>
  <div class="grid grid-2">
    <div><label for="firstInj">Is this the first injection?</label>
      <select id="firstInj"><option value="">--</option><option value="Y">Y</option><option value="N">N</option></select>
    </div>
    <div><label for="prior">Prior positive response</label>
      <select id="prior"><option value="">--</option><option value="Y">Y</option><option value="N">N</option></select>
      <p class="small">Disabled if this is the first injection.</p>
    </div>
    <div><label for="cs12">CS injections last 12 months</label><input id="cs12" type="number" min="0" max="10"></div>
    <div><label for="cslife">CS injections lifetime</label><input id="cslife" type="number" min="0" max="20"></div>
  </div>

  <div class="details">
    <details>
      <summary>PCS-6 (optional)</summary>
      <p class="small">Higher PCS tends to reduce response to passive interventions.</p>

<p class="small"><b>Scoring:</b> 0 = Not at all, 1 = Slightly, 2 = Moderately, 3 = Greatly, 4 = All the time. <b>Higher = more unhelpful pain thoughts.</b></p>

      <div class="grid grid-2">
        <div><label for="pcs1">PCS-6 1: I worry a lot about whether the pain will end</label><select id="pcs1">
      <option value="0">0 – Not at all</option>
      <option value="1">1 – Slightly</option>
      <option value="2">2 – Moderately</option>
      <option value="3">3 – Greatly</option>
      <option value="4">4 – All the time</option>
    </select></div>
<div><label for="pcs2">PCS-6 2: I feel I can’t cope with it anymore</label><select id="pcs2">
      <option value="0">0 – Not at all</option>
      <option value="1">1 – Slightly</option>
      <option value="2">2 – Moderately</option>
      <option value="3">3 – Greatly</option>
      <option value="4">4 – All the time</option>
    </select></div>
<div><label for="pcs3">PCS-6 3: I feel the pain is too intense / overwhelming</label><select id="pcs3">
      <option value="0">0 – Not at all</option>
      <option value="1">1 – Slightly</option>
      <option value="2">2 – Moderately</option>
      <option value="3">3 – Greatly</option>
      <option value="4">4 – All the time</option>
    </select></div>
<div><label for="pcs4">PCS-6 4: I keep thinking about how much it hurts</label><select id="pcs4">
      <option value="0">0 – Not at all</option>
      <option value="1">1 – Slightly</option>
      <option value="2">2 – Moderately</option>
      <option value="3">3 – Greatly</option>
      <option value="4">4 – All the time</option>
    </select></div>
<div><label for="pcs5">PCS-6 5: I keep thinking about how much I want the pain to stop</label><select id="pcs5">
      <option value="0">0 – Not at all</option>
      <option value="1">1 – Slightly</option>
      <option value="2">2 – Moderately</option>
      <option value="3">3 – Greatly</option>
      <option value="4">4 – All the time</option>
    </select></div>
<div><label for="pcs6">PCS-6 6: I become afraid that the pain may get worse</label><select id="pcs6">
      <option value="0">0 – Not at all</option>
      <option value="1">1 – Slightly</option>
      <option value="2">2 – Moderately</option>
      <option value="3">3 – Greatly</option>
      <option value="4">4 – All the time</option>
    </select></div>
      </div>
    </details>
  </div>
</div>


      <div class="step-nav">
        <button type="button" class="btn btn-secondary" id="backBtn">Back</button>
        <button type="button" class="btn btn-primary" id="nextBtn">Next section</button>
      </div>
    </div>

    <div class="card">
      <h2>Results</h2>
      <p class="small">After finishing, you’ll be taken to a dedicated results page for easy review and sharing.</p>
      <a class="btn btn-secondary" href="results.html">Open results page</a>
    </div>
  </div>

  <button class="fab" id="resetFab" title="Reset">↺</button>

  <script src="common.js"></script>
  <script src="clinician.js"></script>
  <script>document.getElementById('darkToggle').addEventListener('click', toggleTheme);</script>
</body>
</html>
