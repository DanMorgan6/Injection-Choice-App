<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Knee Injection Options – Shared Decision Aid</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <div class="topbar">
    <div class="brand">
      <img src="logo.png" class="brand-logo" alt="Logo"/>
      <div>
        <div class="brand-title">Knee Injection Options – Shared Decision Aid</div>
        <div class="brand-sub">Understanding your injection options for knee arthritis</div>
      </div>
    </div>
    <div style="display:flex; gap:10px; align-items:center;">
      <a class="btn btn-secondary" href="index.html">Home</a>
      <button class="btn btn-ghost" id="darkToggle">Dark mode</button>
    </div>
  </div>

  <div class="container">
    <div class="card">
      <div class="grid grid-3">
        <button class="btn btn-primary" id="startBtn">Start</button>
        <button class="btn btn-primary" id="calcBtn">Finish &amp; view results</button>
        <button class="btn btn-secondary" id="printBtn">Print</button>
      </div>
      <div id="amberWarning" class="warning" style="display:none;"></div>
    </div>

    <div class="card hidden" id="formCard">
      <div class="stepper-header">
        <div class="stepper-title" id="stepTitle">Section</div>
        <div class="stepper-progress"><div class="stepper-bar" id="stepBar"></div></div>
        <div class="small" id="stepCounter"></div>
      </div>

      
<div class="step" data-title="Basics">
  <h3>Basics</h3>
  <div class="grid grid-2">
    <div><label for="age">Age (years)</label><input id="age" type="number" min="18" max="100"></div>
    <div><label for="vas">Pain score (0–100)</label><input id="vas" type="number" min="0" max="100"></div>
    <div><label for="height">Height (cm)</label><input id="height" type="number" min="100" max="220"></div>
    <div><label for="weight">Weight (kg)</label><input id="weight" type="number" min="30" max="250"></div>
    <div><label for="bmi">BMI (auto)</label><input id="bmi" type="number" readonly></div>
  </div>
</div>

<div class="step" data-title="Swelling & heat">
  <h3>Swelling &amp; heat</h3>
  <div class="grid grid-2">
    <div><label for="swelling">Does your knee often look swollen or puffy?</label>
      <select id="swelling"><option value="">--</option><option value="Y">Yes</option><option value="N">No</option></select>
    </div>
    <div><label for="warmth">Does it ever feel warm or hot to touch?</label>
      <select id="warmth"><option value="">--</option><option value="Y">Yes</option><option value="N">No</option></select>
    </div>
  </div>
</div>

<div class="step" data-title="Scans & structure">
  <h3>Scans &amp; structure</h3>
  <div class="grid grid-2">
    <div><label for="pt_xray">Have you had an X-ray or MRI confirming arthritis in this knee?</label>
      <select id="pt_xray"><option value="">--</option><option value="Y">Yes</option><option value="N">No / Not sure</option></select>
    </div>
    <div><label for="pt_severity">If yes, how was the arthritis described?</label>
      <select id="pt_severity"><option value="">--</option><option value="mild">Mild</option><option value="mildmod">Mild–Moderate</option><option value="mod">Moderate</option><option value="modsev">Moderate–Severe</option><option value="sev">Severe</option></select>
      <p class="small">Disabled unless you answered “Yes” above.</p>
    </div>
    <div><label for="malalign">Has a doctor told you you have knock knees or bowed legs?</label>
      <select id="malalign"><option value="">--</option><option value="Y">Yes</option><option value="N">No</option></select>
    </div>
  </div>
</div>

<div class="step" data-title="Strength">
  <h3>Strength</h3>
  <div class="grid grid-2">
    <div><label for="quadweak">How difficult is it to stand up from a chair without using your hands?</label>
      <select id="quadweak"><option value="">--</option><option value="easy">Easy</option><option value="abit">A bit difficult</option><option value="hard">Very difficult</option><option value="cant">I cannot do this without my hands</option></select>
    </div>
  </div>
</div>

<div class="step" data-title="Health">
  <h3>Health conditions</h3>
  <p class="small">Tick any that apply.</p>
  <div class="checkbox-grid">
    <label class="check"><input type="checkbox" id="com_diabetes"> Diabetes</label>
    <label class="check"><input type="checkbox" id="com_glaucoma"> Glaucoma / high eye pressure</label>
    <label class="check"><input type="checkbox" id="com_cvd"> Heart / cardiovascular disease</label>
    <label class="check"><input type="checkbox" id="com_ckd"> Chronic kidney disease</label>
    <label class="check"><input type="checkbox" id="com_cld"> Chronic liver disease</label>
    <label class="check"><input type="checkbox" id="com_raid"> Rheumatoid / inflammatory arthritis</label>
    <label class="check"><input type="checkbox" id="com_immune"> Immune-suppressing medication</label>
    <label class="check"><input type="checkbox" id="com_none"> None of the above</label>
  </div>
  <div class="grid grid-2">
    <div><label for="nutr">Nutritional or metabolic risk</label>
      <select id="nutr"><option value="">--</option><option value="Y">Yes / Possibly</option><option value="N">No</option></select>
    </div>
  </div>
</div>

<div class="step" data-title="Previous injections & questionnaires">
  <h3>Previous injections</h3>
  <div class="grid grid-2">
    <div><label for="pt_cs_response">Have you had steroid injections into this knee before?</label>
      <select id="pt_cs_response"><option value="">--</option><option value="none">Never</option><option value="good">Yes – they helped</option><option value="poor">Yes – they did not help much</option></select>
    </div>
    <div><label for="pt_cs_count">Roughly how many steroid injections have you had into this knee?</label>
      <select id="pt_cs_count"><option value="">--</option><option value="none">None</option><option value="few">1–2</option><option value="many">3 or more</option></select>
    </div>
  </div>

  <div id="pt_aspirated_block" style="display:none; margin-top:12px;">
    <label for="pt_aspirated">If your knee is swollen, does your clinician usually drain fluid before injecting?</label>
    <select id="pt_aspirated"><option value="">--</option><option value="Y">Yes</option><option value="N">No</option><option value="U">Not sure</option></select>
  </div>

  <div class="details">
    <details>
      <summary>WOMAC (optional)</summary>
      <p class="small">Answering helps refine predictions.</p>
      <div class="grid grid-2">
        <div><label for="pain1">Pain Q1 (0–4)</label>
        <select id="pain1"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="pain2">Pain Q2 (0–4)</label>
        <select id="pain2"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="pain3">Pain Q3 (0–4)</label>
        <select id="pain3"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="pain4">Pain Q4 (0–4)</label>
        <select id="pain4"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="pain5">Pain Q5 (0–4)</label>
        <select id="pain5"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
        <div><label for="stiff1">Stiffness Q1 (0–4)</label>
        <select id="stiff1"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="stiff2">Stiffness Q2 (0–4)</label>
        <select id="stiff2"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
        <div><label for="func1">Function Q1 (0–4)</label>
        <select id="func1"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func2">Function Q2 (0–4)</label>
        <select id="func2"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func3">Function Q3 (0–4)</label>
        <select id="func3"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func4">Function Q4 (0–4)</label>
        <select id="func4"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func5">Function Q5 (0–4)</label>
        <select id="func5"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func6">Function Q6 (0–4)</label>
        <select id="func6"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func7">Function Q7 (0–4)</label>
        <select id="func7"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func8">Function Q8 (0–4)</label>
        <select id="func8"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func9">Function Q9 (0–4)</label>
        <select id="func9"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func10">Function Q10 (0–4)</label>
        <select id="func10"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func11">Function Q11 (0–4)</label>
        <select id="func11"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func12">Function Q12 (0–4)</label>
        <select id="func12"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func13">Function Q13 (0–4)</label>
        <select id="func13"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func14">Function Q14 (0–4)</label>
        <select id="func14"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func15">Function Q15 (0–4)</label>
        <select id="func15"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func16">Function Q16 (0–4)</label>
        <select id="func16"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="func17">Function Q17 (0–4)</label>
        <select id="func17"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
      </div>
    </details>

    <details style="margin-top:12px;">
      <summary>PCS-6 (optional)</summary>
      <div class="grid grid-2">
        <div><label for="pcs1">PCS Q1 (0–4)</label>
        <select id="pcs1"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="pcs2">PCS Q2 (0–4)</label>
        <select id="pcs2"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="pcs3">PCS Q3 (0–4)</label>
        <select id="pcs3"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="pcs4">PCS Q4 (0–4)</label>
        <select id="pcs4"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="pcs5">PCS Q5 (0–4)</label>
        <select id="pcs5"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
<div><label for="pcs6">PCS Q6 (0–4)</label>
        <select id="pcs6"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
      </div>
    </details>
  </div>
</div>


      <div class="step-nav">
        <button type="button" class="btn btn-secondary" id="backBtn">Back</button>
        <button type="button" class="btn btn-primary" id="nextBtn">Next section</button>
      </div>
    </div>

    <div class="card">
      <h2>Results</h2>
      <p class="small">After finishing, you’ll be taken to a dedicated results page for easy review and sharing.</p>
      <a class="btn btn-secondary" href="results.html">Open results page</a>
    </div>
  </div>

  <button class="fab" id="resetFab" title="Reset">↺</button>

  <script src="common.js"></script>
  <script src="patient.js"></script>
  <script>document.getElementById('darkToggle').addEventListener('click', toggleTheme);</script>
</body>
</html>
